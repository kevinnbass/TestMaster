<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧠 Advanced Analytics Dashboard - AI-Enhanced Cost Optimization</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: auto;
        }
        
        .main-container {
            padding: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .real-time-status {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .status-online { background: #2ecc71; }
        .status-warning { background: #f39c12; }
        .status-critical { background: #e74c3c; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .analytics-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .analytics-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3);
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.4em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-icon {
            font-size: 1.8em;
        }
        
        .refresh-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 10px;
            padding: 8px 12px;
            color: #fff;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .refresh-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .metric-large {
            font-size: 3em;
            font-weight: 700;
            margin: 15px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .metric-change {
            font-size: 1.1em;
            margin-bottom: 20px;
        }
        
        .change-positive { color: #2ecc71; }
        .change-negative { color: #e74c3c; }
        .change-neutral { color: #95a5a6; }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            border-radius: 10px;
            transition: width 0.8s ease;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .ml-insights {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .insight-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .insight-title {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .insight-value {
            font-size: 1.2em;
            font-weight: 500;
        }
        
        .chart-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
            position: relative;
        }
        
        .chart-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1em;
        }
        
        .prediction-timeline {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .timeline-item {
            text-align: center;
            flex: 1;
        }
        
        .timeline-time {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .timeline-value {
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .optimization-recommendations {
            margin-top: 20px;
        }
        
        .recommendation {
            background: rgba(52, 152, 219, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        
        .recommendation-priority {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .priority-high { background: #e74c3c; }
        .priority-medium { background: #f39c12; }
        .priority-low { background: #2ecc71; }
        
        .error-state {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(231, 76, 60, 0.3);
        }
        
        .loading-state {
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .wide-card {
            grid-column: 1 / -1;
        }
        
        .model-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .model-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .model-name {
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .model-efficiency {
            font-size: 1.4em;
            color: #2ecc71;
            margin-bottom: 5px;
        }
        
        .auto-refresh {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .refresh-indicator {
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>🧠 Advanced Analytics Dashboard</h1>
            <div class="subtitle">AI-Enhanced Cost Optimization & Real-Time Monitoring</div>
            <div class="real-time-status">
                <div class="status-indicator">
                    <div class="status-dot status-online"></div>
                    <span>ML Engine Online</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-online"></div>
                    <span>Neural Networks Active</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-online"></div>
                    <span>Real-Time Optimization</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-warning"></div>
                    <span>Budget Monitoring</span>
                </div>
            </div>
        </div>
        
        <div class="analytics-grid">
            <!-- Real-Time ML Optimization -->
            <div class="analytics-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">🚀</span>
                        Real-Time ML Optimization
                    </div>
                    <button class="refresh-btn" onclick="refreshOptimization()">↻</button>
                </div>
                <div id="optimization-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading ML optimization data...
                    </div>
                </div>
            </div>
            
            <!-- Neural Network Training Status -->
            <div class="analytics-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">🧠</span>
                        Neural Network Training
                    </div>
                    <button class="refresh-btn" onclick="refreshTraining()">↻</button>
                </div>
                <div id="training-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading training data...
                    </div>
                </div>
            </div>
            
            <!-- Reinforcement Learning -->
            <div class="analytics-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">🎯</span>
                        Reinforcement Learning
                    </div>
                    <button class="refresh-btn" onclick="refreshRL()">↻</button>
                </div>
                <div id="rl-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading RL optimization...
                    </div>
                </div>
            </div>
            
            <!-- Budget Rebalancing -->
            <div class="analytics-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">⚖️</span>
                        Automated Budget Rebalancing
                    </div>
                    <button class="refresh-btn" onclick="refreshBudget()">↻</button>
                </div>
                <div id="budget-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading budget analysis...
                    </div>
                </div>
            </div>
            
            <!-- Performance Enhancement -->
            <div class="analytics-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">⚡</span>
                        AI Performance Enhancement
                    </div>
                    <button class="refresh-btn" onclick="refreshPerformance()">↻</button>
                </div>
                <div id="performance-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading performance data...
                    </div>
                </div>
            </div>
            
            <!-- Cost Predictions -->
            <div class="analytics-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">📈</span>
                        AI Cost Predictions
                    </div>
                    <button class="refresh-btn" onclick="refreshPredictions()">↻</button>
                </div>
                <div id="predictions-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading predictions...
                    </div>
                </div>
            </div>
            
            <!-- Model Comparison & Recommendations -->
            <div class="analytics-card wide-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">🔍</span>
                        Intelligent Model Recommendations
                    </div>
                    <button class="refresh-btn" onclick="refreshRecommendations()">↻</button>
                </div>
                <div id="recommendations-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading model analysis...
                    </div>
                </div>
            </div>
            
            <!-- System Health Monitoring -->
            <div class="analytics-card wide-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon">🔍</span>
                        ML System Health Monitoring
                    </div>
                    <button class="refresh-btn" onclick="refreshHealth()">↻</button>
                </div>
                <div id="health-content">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        Loading system health...
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="auto-refresh" id="auto-refresh-indicator">
        <div class="refresh-indicator"></div>
        <span>Auto-refreshing every 30s</span>
    </div>

    <script>
        // Advanced Analytics Dashboard JavaScript
        let refreshInterval;
        let isRefreshing = false;
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Advanced Analytics Dashboard initializing...');
            loadAllData();
            startAutoRefresh();
        });
        
        // Auto-refresh every 30 seconds
        function startAutoRefresh() {
            refreshInterval = setInterval(() => {
                if (!isRefreshing) {
                    loadAllData();
                }
            }, 30000);
        }
        
        // Load all dashboard data
        async function loadAllData() {
            isRefreshing = true;
            document.getElementById('auto-refresh-indicator').style.opacity = '1';
            
            try {
                await Promise.all([
                    refreshOptimization(),
                    refreshTraining(), 
                    refreshRL(),
                    refreshBudget(),
                    refreshPerformance(),
                    refreshPredictions(),
                    refreshRecommendations(),
                    refreshHealth()
                ]);
            } catch (error) {
                console.error('Error loading dashboard data:', error);
            } finally {
                isRefreshing = false;
                document.getElementById('auto-refresh-indicator').style.opacity = '0.7';
            }
        }
        
        // Refresh real-time ML optimization
        async function refreshOptimization() {
            const container = document.getElementById('optimization-content');
            
            try {
                // In a real implementation, this would call the Python API
                // For now, we'll simulate the ML optimization data
                const mockData = {
                    optimization_score: 87.5,
                    recommendations: [
                        {
                            switch_from: 'gpt-4',
                            switch_to: 'claude-3-sonnet',
                            cost_savings: '35%',
                            quality_retention: '92%'
                        }
                    ],
                    performance_improvements: {
                        response_time_reduction: '23%',
                        cost_efficiency_increase: '31%'
                    }
                };
                
                container.innerHTML = `
                    <div class="metric-large">${mockData.optimization_score}</div>
                    <div class="metric-change change-positive">↗ +12.3% optimization score</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${mockData.optimization_score}%"></div>
                    </div>
                    <div class="ml-insights">
                        <div class="insight-item">
                            <div class="insight-title">Response Time</div>
                            <div class="insight-value">-${mockData.performance_improvements.response_time_reduction}</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">Cost Efficiency</div>
                            <div class="insight-value">+${mockData.performance_improvements.cost_efficiency_increase}</div>
                        </div>
                    </div>
                    <div class="optimization-recommendations">
                        ${mockData.recommendations.map(rec => `
                            <div class="recommendation">
                                <div class="recommendation-priority priority-high">HIGH IMPACT</div>
                                Switch from ${rec.switch_from} to ${rec.switch_to}<br>
                                <small>💰 ${rec.cost_savings} savings • 🎯 ${rec.quality_retention} quality retained</small>
                            </div>
                        `).join('')}
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `
                    <div class="error-state">
                        ❌ Error loading optimization data<br>
                        <small>${error.message}</small>
                    </div>
                `;
            }
        }
        
        // Refresh neural network training status
        async function refreshTraining() {
            const container = document.getElementById('training-content');
            
            try {
                const mockData = {
                    model_id: 'cost_optimizer_v1_20250823',
                    training_cycles_completed: 100,
                    final_accuracy: 0.95,
                    validation_loss: 0.023,
                    training_duration_seconds: 45.2
                };
                
                container.innerHTML = `
                    <div class="metric-large">${(mockData.final_accuracy * 100).toFixed(1)}%</div>
                    <div class="metric-change change-positive">↗ Training Accuracy</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${mockData.final_accuracy * 100}%"></div>
                    </div>
                    <div class="ml-insights">
                        <div class="insight-item">
                            <div class="insight-title">Validation Loss</div>
                            <div class="insight-value">${mockData.validation_loss}</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">Training Time</div>
                            <div class="insight-value">${mockData.training_duration_seconds}s</div>
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-state">❌ Error loading training data</div>`;
            }
        }
        
        // Refresh reinforcement learning
        async function refreshRL() {
            const container = document.getElementById('rl-content');
            
            try {
                const mockData = {
                    episodes_completed: 50,
                    final_reward: 47.8,
                    optimal_thresholds: [0.45, 0.72, 0.88, 0.96],
                    convergence_rate: 0.92,
                    learning_efficiency: 'high'
                };
                
                container.innerHTML = `
                    <div class="metric-large">${(mockData.convergence_rate * 100).toFixed(0)}%</div>
                    <div class="metric-change change-positive">↗ Convergence Rate</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${mockData.convergence_rate * 100}%"></div>
                    </div>
                    <div class="ml-insights">
                        <div class="insight-item">
                            <div class="insight-title">Episodes</div>
                            <div class="insight-value">${mockData.episodes_completed}</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">Final Reward</div>
                            <div class="insight-value">${mockData.final_reward.toFixed(1)}</div>
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-state">❌ Error loading RL data</div>`;
            }
        }
        
        // Refresh budget analysis
        async function refreshBudget() {
            const container = document.getElementById('budget-content');
            
            try {
                const mockData = {
                    recommendations: [
                        {type: 'daily_increase', from: 10.0, to: 12.5, urgency: 'medium'}
                    ],
                    allocation_strategy: {
                        peak_hours: {percentage: 35, recommended_budget: 4.2},
                        agent_alpha: {percentage: 45, recommended_budget: 5.4}
                    }
                };
                
                container.innerHTML = `
                    <div class="metric-large">$${mockData.recommendations[0].to}</div>
                    <div class="metric-change change-positive">↗ Recommended Daily Limit</div>
                    <div class="optimization-recommendations">
                        <div class="recommendation">
                            <div class="recommendation-priority priority-medium">RECOMMENDED</div>
                            Increase daily limit from $${mockData.recommendations[0].from} to $${mockData.recommendations[0].to}<br>
                            <small>📊 Based on usage patterns and peak hour analysis</small>
                        </div>
                    </div>
                    <div class="ml-insights">
                        <div class="insight-item">
                            <div class="insight-title">Peak Hours Budget</div>
                            <div class="insight-value">$${mockData.allocation_strategy.peak_hours.recommended_budget}</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">Agent Alpha Budget</div>
                            <div class="insight-value">$${mockData.allocation_strategy.agent_alpha.recommended_budget}</div>
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-state">❌ Error loading budget data</div>`;
            }
        }
        
        // Refresh performance data
        async function refreshPerformance() {
            const container = document.getElementById('performance-content');
            
            try {
                const mockData = {
                    performance_score: 87.2,
                    avg_response_time: 1.23,
                    avg_cost_efficiency: 2847.3,
                    cache_efficiency_score: 78.5
                };
                
                container.innerHTML = `
                    <div class="metric-large">${mockData.performance_score}</div>
                    <div class="metric-change change-positive">↗ Performance Score</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${mockData.performance_score}%"></div>
                    </div>
                    <div class="ml-insights">
                        <div class="insight-item">
                            <div class="insight-title">Response Time</div>
                            <div class="insight-value">${mockData.avg_response_time}s</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">Cache Hit Rate</div>
                            <div class="insight-value">${mockData.cache_efficiency_score}%</div>
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-state">❌ Error loading performance data</div>`;
            }
        }
        
        // Refresh cost predictions
        async function refreshPredictions() {
            const container = document.getElementById('predictions-content');
            
            try {
                const mockData = {
                    total_predicted_cost: 8.75,
                    current_budget_remaining: 16.25,
                    risk_level: 'moderate',
                    hourly_predictions: [
                        {hour: '1h', cost: 0.75},
                        {hour: '6h', cost: 3.25},
                        {hour: '12h', cost: 6.50},
                        {hour: '24h', cost: 8.75}
                    ]
                };
                
                container.innerHTML = `
                    <div class="metric-large">$${mockData.total_predicted_cost}</div>
                    <div class="metric-change change-neutral">24-hour prediction</div>
                    <div class="prediction-timeline">
                        ${mockData.hourly_predictions.map(pred => `
                            <div class="timeline-item">
                                <div class="timeline-time">${pred.hour}</div>
                                <div class="timeline-value">$${pred.cost}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="optimization-recommendations">
                        <div class="recommendation">
                            <div class="recommendation-priority priority-medium">FORECAST</div>
                            Risk Level: ${mockData.risk_level.toUpperCase()}<br>
                            <small>💰 Budget remaining: $${mockData.current_budget_remaining}</small>
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-state">❌ Error loading predictions</div>`;
            }
        }
        
        // Refresh model recommendations
        async function refreshRecommendations() {
            const container = document.getElementById('recommendations-content');
            
            try {
                const mockData = [
                    {model: 'GPT-4', efficiency: 92, cost_per_1k: 0.03},
                    {model: 'Claude-3-Sonnet', efficiency: 94, cost_per_1k: 0.003},
                    {model: 'GPT-3.5-Turbo', efficiency: 78, cost_per_1k: 0.0005},
                    {model: 'Claude-3-Haiku', efficiency: 85, cost_per_1k: 0.00025}
                ];
                
                container.innerHTML = `
                    <div class="model-comparison">
                        ${mockData.map(model => `
                            <div class="model-card">
                                <div class="model-name">${model.model}</div>
                                <div class="model-efficiency">${model.efficiency}%</div>
                                <div>$${model.cost_per_1k}/1k tokens</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="optimization-recommendations">
                        <div class="recommendation">
                            <div class="recommendation-priority priority-high">RECOMMENDED</div>
                            Switch to Claude-3-Sonnet for optimal cost-efficiency balance<br>
                            <small>🎯 94% efficiency at $0.003/1k tokens</small>
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-state">❌ Error loading recommendations</div>`;
            }
        }
        
        // Refresh system health
        async function refreshHealth() {
            const container = document.getElementById('health-content');
            
            try {
                const mockData = {
                    ml_systems: {
                        neural_networks: 'operational',
                        reinforcement_learning: 'operational',
                        optimization_engine: 'operational',
                        budget_rebalancing: 'operational',
                        performance_enhancement: 'operational'
                    },
                    system_load: 23.5,
                    memory_usage: 67.8,
                    api_calls_per_minute: 12.3
                };
                
                const systemStatus = Object.entries(mockData.ml_systems).map(([system, status]) => `
                    <div class="insight-item">
                        <div class="insight-title">${system.replace(/_/g, ' ').toUpperCase()}</div>
                        <div class="insight-value">✅ ${status.toUpperCase()}</div>
                    </div>
                `).join('');
                
                container.innerHTML = `
                    <div class="ml-insights">
                        ${systemStatus}
                    </div>
                    <div class="ml-insights">
                        <div class="insight-item">
                            <div class="insight-title">System Load</div>
                            <div class="insight-value">${mockData.system_load}%</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">Memory Usage</div>
                            <div class="insight-value">${mockData.memory_usage}%</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">API Calls/Min</div>
                            <div class="insight-value">${mockData.api_calls_per_minute}</div>
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-state">❌ Error loading system health</div>`;
            }
        }
        
        // Cleanup on page unload
        window.addEventListener('beforeunload', function() {
            if (refreshInterval) {
                clearInterval(refreshInterval);
            }
        });
    </script>
</body>
</html>